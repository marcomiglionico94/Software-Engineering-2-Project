\section{Functional Requirements}
Assuming that the domain properties stipulated in the paragraph [1.5] hold, and, in order to achieve the goals listed in paragraph [1.3], the following requirements can be derived. The requirements are grouped under each goal from which it is derived.

\begin{enumerate}

\item allows only the registered users to access the functionalities of the system:

\begin{itemize}
\item allows the user to sign up to the system if he provides valid name, surname, address, birth date and payment information; %TODO how to validate? specify "valid"?
\item allows only the registered users to log in to the system;
\item The system must be able to check if the username and password provided are correct;
\item The system must let the user login if and only if the provided username and the password are correct;
\end{itemize}

\item allows the user to book a car for up to an hour before he/she picks it up:

\begin{itemize}
\item The system must allow only the users that has not been banned to book a car;
\item The system must turn the state of the car from booked to available if the user did not unlock it within an hour since the moment of the reservation;
\item The system must turn the state of the car from available to booked after the user reserve it;
\end{itemize}

\item allows the user to search for a car in a specific location:

\begin{itemize}
\item The system must allow only the users that has not been banned to search for a car;
\item The system must ask the user to insert a specific location;
\item The system must be able to check if the specified location exists;
\item The system must be able to show all the available cars,with their current level of battery,within a range of 1 KM from that specific location;
\item If there are not any available cars within a range of 1 KM from that specific location the system must notify the user;
\end{itemize}

\item allows the user to find the closest cars with respect to his/her position:

\begin{itemize}
\item The system must allow only the users that has not been banned to search for a car;
\item The system must be able to check the position of the user through the GPS position of his mobile phone;
\item The system must be able to show all the available cars,with their current level of battery, within a range of 1 KM from the position of the user;
\item If there are not any available cars within a range of 1 KM from the position of the user the system must notify the user;
\end{itemize}

\item allows the user to know in every moment the current fee he/she has to pay;

\begin{itemize}
\item The system must be able to calculate the current fee with respect to the amount of money per minute defined by the company;
\item The system must be able to show on the car screen the current fee that the user has to pay;
\end{itemize}

\item Allows the user to end the ride only in specific areas called safe areas:

\begin{itemize}
\item The system must be able to show to the user the position of the safe areas on the map;
\item The system must notify the user when he/she is inside a safe area;
\item The system must end the reservation only when the user is parked in a safe area and he/she exits the car;
\item When the reservation ends the system must change the status of the car in available and lock the car;
\end{itemize}

\item allows the user to unlock the vehicle when he/she is next to it using the mobile app:

\begin{itemize}
\item The system must be able to calculate the distance between the car and the mobile phone of the user using the GPS;
\item When the distance between the car and the mobile phone of the user is less than 6 meters the system must show to the user the option to unlock the car;
\item The system must let the user unlock only the car that he/she currently reserved;
\item The system must be able to unlock the cars remotely;
\item The system must be notified when the user enter inside the car;
\item The system must be able to unlock the car again if the user doesn't enter inside the car within 3 minutes;
\end{itemize}

\item allows the user to obtain a 10\% discount if he/she takes at least 2 passengers:

\begin{itemize}
\item The system must be able to detect the number of passenger in the car;
\item The system must apply the 10\% discount on the current fee that the user has to pay if there are at least 2 passengers in the car;
\end{itemize}

\item allows the user to recharge a car only in a power grid station:

\begin{itemize}
\item The system must be able to show to the user the position of the closest power grid station;
\end{itemize}

\item allows the user to obtain a 20\% discount if the car is left with no more than 50\% of battery empty:

\begin{itemize}
\item The system must be able to check the remaining battery when the the ride ends;
\item The system must apply the 20\% discount on the current fee that the user has to pay if the car is left with no more than 50\% of battery empty;
\end{itemize}

\item allows the user to obtain a 30\% discount if the car is left in a special parking area in which it can be recharged and the user takes care of plugging the car into the power grid:

\begin{itemize}
\item The system must be able to check if the car is in a special parking area and the ride is ended;
\item The system must be able to check if the user start plugging the car;
\item The system must not apply the 30\% discount if the user start plugging the car but he/she doesn't end the ride;
\item The system must apply the 30\% discount on the current fee the user has to pay if the car is left in a special parking area in which it can be recharged and the user takes care of plugging the car into the power grid:
\end{itemize}

\item the system charge the user 30\% on the last ride if the car is left at more than 3 KM from the nearest power grid station or the car is left with more than 80\% of the battery empty:

\begin{itemize}
\item The system must be able to check the distance between the car and the nearest power grid station;
\item The system must be able to check the remaining battery when the the ride ends;
\item The system must apply the 30\% on the current fee the user has to pay if the car is left at more than 3 KM from the nearest power grid station or the car is left with more than 80\% of the battery empty;
\end{itemize}

\item allows the user to enable the saving money option:

\begin{itemize}
\item The system must let the user the possibility to enable the saving mode option;
\item The system must be able to provide information about the station where to leave the car to obtain a discount;
\item The system must ask the user his/her destination;
\item The system must be able to check the availability of power plug in a specific station;
\item The system must be able to ensure a uniform distribution of cars in the city;
\end{itemize}

\item the system must keep the electric cars working and with an high level of battery:
\begin{itemize}
\item The system must .... %TODO
\end{itemize}
\end{enumerate}
